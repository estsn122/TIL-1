# Gitのコマンド一覧
- git init
   - ローカルリポジトリ(＝.gitディレクトリのこと。gitに必要なものがほどんど入っている)の新規作成。ドット（.）は隠れフォルダを表している。
- git clone URL
   - ローカルに同じリポジトリを複製する。ローカルにリモートリポジトリのファイルとリポジトリをコピーする。
- git add -A
   - 現在のディレクトリにあるファイルがステージング (Staging) という待機用リポジトリに置かれる。
- git commit
   - 変更を記録する(＝コミット)。ステージの内容をスナップショットとしてリポジトリに記録する（変更、新規作成、削除、複数ファイルの変更・作
成・削除）

- git commit -m 'メッセージ'
   - コミットメッセージ(何を行なったか)をコマンドラインで直接指定できる。
- git commit -v
   - エディターを立ち上げて、「どのファイルにどんな変更をしたのか」エディター上で確認できる。
- git status
   - 変更されたファイルを確認する。
      1. ワークツリーとステージの間で変更されたファイル(前回、ステージに追加してから変更したワークツリーのファイル)
      2. ステージとリポジトリの間で変更されたファイル(前回、コミットしてからステージに追加されたファイル)を確認できる。
- git diff 
   - git addする前の変更差分を確認する。ワークツリーとステージの間の変更差分を確認する。
- git diff ファイル名
   - 特定のファイルの変更差分を見る。
- git diff --staged　
   - ステージしたけど、まだコミットしてない変更差分を見る。git addした後の変更内容を確認する。
- git log
   - 今までの変更履歴(コミット)を確認する(最新のコミットから順に表示)。
- git log --oneine
   - 変更履歴を１行で表示。
- git log -p ファイル名
   - 指定したファイルの変更差分を表示する。
- git log -n コミット数
   - 表示するコミット数を制限(最新順で表示)。
- git rm ファイル名
   - ファイルの削除を記録する(削除された変更状態がステージに記録される)。
   - ファイルごと削除（コミットした記録だけではなくワークツリー内のファイルも削除。ワークツリーからもリポジトリからも削除したい）
- git rm -r ディレクトリ名
- git rm --cached ファイル名
   - コミットした記録は削除したいけど、ワークツリー内のファイルは残したい（リポジトリからだけ削除して、その変更状態がステージに記録される。
   - これらのコマンド実行後、lsでワークツリーのディレクトリ内を確認、git statusで変更されたファイルを確認をすれば、記録が分かる。
- git mv 旧ファイル 新ファイル
   - ファイルの移動(＝ファイル名の変更)を記録する。つまり、ワークツリーのファイル名が変更されて、かつ、ステージにも変更が反映される。
- git remote add origin URL名
   - リモートリポジトリ(GitHubなど)を新規に追加する。
   - 今後はURL無しに「originというリモートリポジトリのショートカット名」でGitHubリポジトリにアップしたり取得したりできる。
- git push -u origin master(ブランチ名)
   - ローカルリポジトリの内容をリモートリポジトリに送る（master=デフォルトのブランチ名）。
   - 最初に-uを付ければ、次回からgit pushに省略可能。
   - ローカルリポジトリの内容をリモートリポジトリに送る（master=デフォルトのブランチ名）。最初に-uを付ければ、次回からgit pushに省略可能。
#### ワークツリーのファイル内の変更を取り消したい
- git checkout -- ファイル名
- git checkout -- ディレクトリ名
- git checkout --.
   - 全変更を取り消す。
#### ステージに追加したけど、その変更(ステージへの追加)を取り消したい
- git reset HEAD ファイル名
- git reset HEAD ディレクトリ名
- git reset HEAD.　
   - 全変更を取り消す。
#### 直前のコミットを修正したい(今のステージの状態をもとに、コミットの内容を上書きする)
- git commit --amend
   - 例えば、ファイルの修正を忘れてた時に、ワークツリー内のファイルに変更を加え→`git add`→`git commit --amend`を行う。
   - リモートリポジトリにpushした後のコミットは絶対にamendで修正してはいけない。
     - pushした後にそのコミットを修正したければ、`git commit`でもう一度新しいコミットを作って修正すること。
#### リモートリポジトリの情報を確認する
- git remote
   - 設定しているリモートリポジトリを一覧表示する
- git remote -v
   - 設定しているリモートリポジトリのURLを一覧表示する。
- 
#### リモートリポジトリを複数登録する(複数のチームで作業するとき、自分のリモートを持ちたいときに使える)
- git remote add リモート名 リモートURL
   - リモート名(ショートカット)で、URLのリモートリポジトリを新規登録する。
#### リモートリポジトリから情報を取得する（フェッチ） 
   - git fetch リモート名
   - git fetch origin
     - ローカルリポジトリに情報を保存するけど、ワークツリーには保存されない。
     - 具体的にはremotes/リモート/ブランチ というリモートブランチに保存される。
     - git mergeでローカルリポジトリ(ローカルブランチ)に保存された情報を、ワークツリーに落とす。
#### リモートリポジトリから情報を取得する（プル）
- プル…リモートから情報を取得して、マージまでを一度にやりたいときに使う。
   - (git fetchとgit mergeを同時に行っている)。
- git pull リモート名 ブランチ名
#### フェッチとプル
- フェッチを使うのが基本オススメ。
- プルは特殊な挙動を起こす。今自分がいるブランチに、プルしてきたブランチがマージされる。異なるブランチ同士が統合される恐れがある。ファイルがグチャグチャになる可能性。
   - 自分がマスターブランチにいて、何の変更もしていないときに限ってpullで情報を取得するなど行うべき。
   - 安全なケースの時にだけ使うのが良さそう。

#### リモートの詳細情報を表示する
- git remote show リモート名　　
   - fetchとpushのURL、リモートブランチ、git pullの挙動、git pushの挙動などが表示。
#### リモート名を変更する、リモートを削除する
- git remote rename　旧リモート名 新リモート名
- git remote rm リモート名

## ブランチ

- 並行して複数機能を開発するためにあるもの。
- ブランチは分岐して開発するためにあるもので、他の人の行った開発が、自分の開発には影響されないメリットを持つ。
- コミットを指すポインタのこと。ブランチがあることで開発を分岐させられる（複数の機能の共同開発が可能となる）。

#### HEAD

- 今自分が作業しているブランチを指し示したポインタのこと。
- この２つ(リポジトリ内に保存されている)により最新のコミットがどれか分かる(HEAD→ブランチ→コミット)

#### ブランチの新規作成
- git branch ブランチ名
   - ブランチを新規追加する。（ブランチの切り替えまでは行わない）
   
#### ブランチの表示
- git branch
   - 今あるブランチの一覧を表示。
- git branch -a
   - 全てのブランチを表示（リモートリポジトリも表示できる）
#### ブランチの切り替え
- git checkout 既存ブランチ名　
   - ブランチを切り替える。(HEADが指し示すブランチを切り替えるということ)
- git checkout -b 新ブランチ名
   - ブランチを新規作成し、切り替えも行う。

#### 変更をマージする
##### マージ・・・他の人の変更内容を自分のブランチに取り込む作業のこと。
- git merge ブランチ名
   - 指定したブランチ名の変更内容を自分がいるブランチに取り込む。
- git merge リモート名 ブランチ名　
- git merge origin master
   - origin(＝GitHubのこと)のmasterブランチの内容を自分の作業ブランチに取り込む。

## コンフリクト
- 複数人の人が、同じファイルの同じ行に対して異なる編集を行った時に起こること。
- マージしたら、コンフリクトしてるよと言われ、Autoマージが失敗する。
- コンフリクトしても、落ち着いてファイルの内容をきれいに書き換えればOK。

#### コンフリクトの事故が起きにくい運用ルール
1. 複数人で同じファイルを変更しない
2. pullやmergeする前に変更中の状態を無くしておく(commitやstash(変更中のファイルを一時保管するコマンド)で変更中のファイルを無くしておく)
3. pullするときは、pullするブランチに移動してからpullする(同じ名前のブランチに移動してからpullしろってこと)

#### ブランチ名を変更する
- git branch -m 新ブランチ名
   - 自分が作業しているブランチの名前を変更する
#### ブランチを削除する
- git branch -d ブランチ名
   - masterにマージされていない変更が残っている場合、そのブランチは削除しないようになっている。安全。
- git branch -D ブランチ名　
   - 強制削除する

#### ブランチを利用した開発の流れ
- masterブランチをリリース用ブランチとして使い、開発はトピックブランチを作成して進めるのが基本。
   - masterブランチを常に最新のリリース状態に保っているから、最新のリリース内容がどんなものかmasterを見れば分かるようになっている！何かバグが起きても、一つ前のマスターブランチのバージョンに戻せばいいだけ。
   - masterで開発すると、最新のリリース状態がわからなくなるし、前のバージョンに切り戻すのが難しくなる。
- 開発するときは、最新のマスターからトピックごとにブランチを切って、そのトピックブランチで開発を行う。そして、開発が完了したらmasterにマージする。
- masterはリリース用に使う。

## プルリクエスト
- 自分の変更したコードをリポジトリに取り込んでもらえるよう依頼する機能。
- バグを発生させない、コードの質を保つために、コードレビューを行ってもらう。

# Github flow

# Git flow

#### リベースで変更履歴を修正する
- git rebase ブランチ名
   - 「ブランチの基点となるコミット」を別のコミットに移動する
　　- コミットの履歴を一直線に綺麗に整えられる。
## リベースとマージの違い
- 履歴が一直線なのか、枝分かれなのか。

1. マージ...作業の履歴を残したい場合
- コンフリクトの解決が比較的簡単(コンフリクトが一度しか発生しない)
- マージコミットがたくさんあると履歴が複雑化する

2. リベース...作業の履歴を消したい場合
- 履歴をきれいに保つことが可能
- コンフリクトの解決が若干面倒(各コミットごとにコンフリクトが発生する)

#### リベースとマージの使い分け
- プッシュしていないローカルの変更には、リベースを使う
- プッシュした後はマージを使う。コンフリクトしそうな時もマージ。

#### githubにプッシュしたコミットをリベースするのは絶対NG
- git push -fは絶対NG

#### プルにはマージ型とリベース型がある
- マージ型
   - マージコミットが残るから、マージしたという記録を残したいときに使う。
- リベース型
   - マージコミットが残らないから、Githubの内容を取得したいだけのときは以下のコマンドを使う。
     - `git  pull --rebase リモート名 ブランチ名`

#### 複数のコミットをやり直す
- git rebase -i コミット名
- git rebase -i HEAD~3    
   - 直前３つのコミットをやり直す
   
   
## Gitでよく使うコマンド
git log -p
git branch
git checkout -b aaa
git status
git stash
git stash -u
git stash apply
git stash pop
git reset -soft HEAD^
git reset -soft HEAD^^
git reset -soft HEAD2^
git reset -hard HEAD2^（危険）
git add file_name
git add app/controller/*
git commit -m "Fix: xxx部分を修正"
git push
git push xxxxx
git push origin HEAD
git fetch
git pull
git merge
git merge --abort

- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
